# [10분 테코톡] 👃미스터코의 Apache MPM vs NGINX vs Node.js

## Apache MPM

MPM(Multi-Processing Modules)

- 서버는 시스템의 네트웍 포트에 연결하고, 요청을 받아들이며, 받아들인 요청을 처리하기 위해 자식들에게 분배하는 다중처리**모듈**(Multi-Processing Modules, MPMs)을 선택할 수 있다.
- 커넥션 생성(binding, accept)
- 커넥션 분배
  - 프로세스든 스레든 해당 커넥션에 대한 요청을 담당

모듈 종류(Unix 계열)

- prefork
  - 프로세스
- worker
  - 스레드
- event

<br>

## NGINX

NGINX는 **웹서버**로 시작

확장성에 대한 대응방식은 비슷 (Node.js)

- 웹서버라는 역할에 최적화..!
- 좀 더 비동기 방식에 적합한 입력들 (CPU 점유를 적게하는)

로드밸런서

- 효율성
- 안정성
- 누군가 죽어도 다른애가  있음

리버스 프록시

- 보안
- 유연성
- 외부에 직접적으로 모르기에

레이턴시 감소

- 압축
- SSL(암호화)
- 캐시

Node.js에서 조심해야 할 부분을 많이 채워줌

- 웹서버 or 웹 어플리케이션 서버의 부담도 덜어감

<br>

## Node.js

Chrome V8 javascript 엔진으로 빌드된 javascript **런타임**

 비동기 이벤트 주도 JavaScript 런타임으로써 Node.js는 확장성 있는 네트워크 애플리케이션을 만들 수 있도록 설계 되었다.

- 싱글 스레드로 돌려서 최대한 해야할 일만 할 수 있도록
  - ex. 컨텍스트 스위칭 영향 줄이기(오버헤드를 줄임)
- 기다려야 할 시간을 최소화 (비동기+이벤트)
  - 네트워크 애플리케이션이 적용하기 딱 좋은 경우...!

node.js 사용시 주의할 점

- 하나의 흐름(ex. 함수)이 완전히 끝나기 전에는 다른 흐름이 실행될 기회가 없다.
- CPU를 많이 사용하는 경우를 조심해야하는 이유..!
- 조심해야하는 입력들
  - 정규표현식 (REDOS)
  - synchronous expenseve API
    - 암호화
    - 파일 IO
    - DNS에 요청
    - 프로세스 fork
  - JSON DOS

## 결론

동시에 많은 연결과 요청이 있어도 성능이 그 숫자에 영향을 받지 않도록 하기 위한 노력

그만큼 잘 쓰기위한 노력도 필요...ㅎ

필독서 추천 : "리눅스 커널 이야기"